#include <satemu/db/ipl_db.hpp>

#include <unordered_map>

template <>
struct std::hash<satemu::Hash128> {
    size_t operator()(const satemu::Hash128 &e) const noexcept {
        uint64_t low = 0;
        uint64_t high = 0;
        for (size_t i = 0; i < 16; i++) {
            low |= static_cast<uint64_t>(e[i]) << (i * 8ull);
            high |= static_cast<uint64_t>(e[i + 8]) << (i * 8ull);
        }
        return std::hash<uint64_t>{}(low) ^ std::hash<uint64_t>{}(high);
    }
};

namespace satemu::db {

// clang-format off
static const std::unordered_map<Hash128, IPLROMInfo> kIPLInfos = {
    {{0x91,0xb0,0xb0,0x21,0xf3,0x35,0x74,0x3d,0x15,0x70,0x13,0x60,0xd5,0x90,0x2e,0xee}, {"sega_100.bin",  "1.00",  1994,  9, 21, SystemVariant::SaturnJP}},
    {{0x4f,0x38,0x04,0xed,0x5a,0xb3,0x2b,0xfc,0xef,0xbb,0x7c,0x7a,0xd7,0xa4,0x92,0xc7}, {"sega_101.bin",  "1.01",  1994, 12, 28, SystemVariant::SaturnJP}},
    {{0x0d,0xaa,0x89,0x5f,0x0e,0x05,0x19,0xe9,0xcd,0xc7,0xf0,0xb6,0x03,0xe4,0xdd,0x37}, {"sega_100a.bin", "1.00a", 1994, 11, 15, SystemVariant::SaturnUS_EU}},
    {{0x62,0xf6,0x13,0x11,0xba,0x6d,0x42,0x98,0x2a,0xda,0x24,0x7a,0xb1,0x37,0xf0,0x72}, {"mpr-17933.bin", "1.01a", 1994, 11, 15, SystemVariant::SaturnUS_EU}},
    {{0x82,0x90,0xa6,0x60,0x86,0x77,0x37,0x08,0x6b,0x34,0x46,0x78,0x99,0x91,0x4f,0x4a}, {"hisaturn.bin",  "1.01",  1995,  1, 30, SystemVariant::HiSaturn}},
    {{0xf0,0xc4,0x2a,0x59,0x47,0xda,0xd2,0xed,0x0a,0x3e,0x97,0xea,0x96,0x49,0xff,0x2a}, {"mpr-18100.bin", "1.02",  1995,  5, 19, SystemVariant::HiSaturn}},
    {{0xf4,0x23,0xad,0x71,0x4b,0xc2,0xf5,0x48,0x42,0x18,0x55,0xd2,0x9d,0xbf,0x97,0xf4}, {"gamenavi.bin",  "1.03",  1995,  7, 20, SystemVariant::GameNaviHiSaturn}},
    {{0xed,0xf7,0x21,0x6d,0x09,0xc2,0x34,0xba,0xe8,0x58,0xec,0x8b,0xa5,0x43,0x35,0x6a}, {"samsung.bin",   "1.02a", 1994, 11, 15, SystemVariant::SamsungSaturn}},
    {{0xa4,0xe5,0xb2,0x05,0x13,0xa0,0xef,0xf1,0xdd,0x27,0x03,0xc3,0x54,0x06,0x19,0x5d}, {"vsaturn.bin",   "1.01",  1995,  7,  3, SystemVariant::VSaturn}},
    {{0xf6,0x65,0x5e,0x14,0xbf,0x8e,0x60,0xbf,0x26,0x52,0x67,0xfb,0x0c,0xb2,0x06,0x52}, {"sega1003.bin",  "1.003", 1994, 10, 12, SystemVariant::DevKit}},
};
// clang-format on

const IPLROMInfo *GetIPLROMInfo(Hash128 hash) {
    if (kIPLInfos.contains(hash)) {
        return &kIPLInfos.at(hash);
    } else {
        return nullptr;
    }
}

} // namespace satemu::db
